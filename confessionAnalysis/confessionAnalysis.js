(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/confessionAnalysis/confessionAnalysis"],{"309a":function(n,e,t){"use strict";t.r(e);var r=t("9b82"),a=t("a41e");for(var o in a)["default"].indexOf(o)<0&&function(n){t.d(e,n,(function(){return a[n]}))}(o);t("5270");var s=t("828b"),i=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],void 0);e["default"]=i.exports},5270:function(n,e,t){"use strict";var r=t("7de5"),a=t.n(r);a.a},"7de5":function(n,e,t){},8384:function(n,e,t){"use strict";(function(n,e){var r=t("47a9");t("f244");r(t("3240"));var a=r(t("309a"));n.__webpack_require_UNI_MP_PLUGIN__=t,e(a.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"9b82":function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"c",(function(){return o})),t.d(e,"a",(function(){return r}));var r={themeBackground:function(){return Promise.all([t.e("common/vendor"),t.e("components/theme-background/theme-background")]).then(t.bind(null,"327d"))}},a=function(){var n=this.$createElement;this._self._c},o=[]},a41e:function(n,e,t){"use strict";t.r(e);var r=t("ef35"),a=t.n(r);for(var o in r)["default"].indexOf(o)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(o);e["default"]=a.a},ef35:function(n,e,t){"use strict";var r=t("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(t("34cf")),o=r(t("3b2d")),s=t("ea24"),i={data:function(){return{analysis:null,loading:!0,steps:[]}},onLoad:function(){var n=this;(0,s.busAnalysis)({type:0,day:0}).then((function(e){if(n.analysis=n.parseEmojiJson(e.result.choices[0].message.content),n.analysis.actionPlan){var t=n.analysis.actionPlan.replace(/\\n/g,"\n");n.steps=t.split("\n")}n.loading=!1}))},onShow:function(){this.$tool.setTheme(this.$store.state.currTheme.colors.primary)},methods:{parseEmojiJson:function(n){try{var e=n.trim();65279===e.charCodeAt(0)&&(e=e.substring(1));var t=e.indexOf("{"),r=e.lastIndexOf("}");-1!==t&&-1!==r&&r>t&&(e=e.substring(t,r+1));var s=JSON.parse(e);return function n(e){if("object"!==(0,o.default)(e)||null===e)return e;if(Array.isArray(e))return e.map(n);for(var t={},r=0,s=Object.entries(e);r<s.length;r++){var i=(0,a.default)(s[r],2),c=i[0],u=i[1];t[c]=n(u),c.includes("📊")&&(t.distractions=t[c]),c.includes("⏰")&&(t.peakTime=t[c])}return t}(s)}catch(c){console.error("解析失败，尝试修复...",c);var i=n.replace(/'/g,'"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/,\s*([}\]])/g,"$1");try{return JSON.parse(i)}catch(u){throw console.error("最终解析失败",u),new Error("无法解析JSON: ".concat(u.message))}}}}};e.default=i}},[["8384","common/runtime","common/vendor"]]]);