<view class="focus-container"><theme-background vue-id="a402ad86-1" bind:__l="__l" vue-slots="{{['default']}}"><view class="focus-container"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="help-btn" bindtap="__e"><text class="help-icon">❓</text></view><view class="timer-section"><text class="timer">{{$root.m0}}</text><text class="timer-label">专注时间</text></view><view class="focus-stats"><view class="stat-item"><text class="stat-value">{{userInfo.focusProgress+"%"}}</text><text class="stat-label">专注度</text></view><view class="stat-item"><text class="stat-value">{{crystalRate+"x"}}</text><text class="stat-label">晶体倍率</text></view></view><view class="settings-section"><text class="section-title">结界设置</text><view class="setting-item"><view class="setting-info"><text class="setting-title">专注守护</text><text class="setting-desc">分享给好友共同见证专注进度</text></view><switch checked="{{escortEnabled}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['toggleEscort',['$event']]]]]}}" bindchange="__e"></switch></view><view class="setting-item"><text>地理围栏 (+20%晶石)</text><switch checked="{{locationEnabled}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['toggleLocation',['$event']]]]]}}" bindchange="__e"></switch></view><view class="setting-item"><text>姿态监测 (+20%晶石)</text><switch checked="{{attitudeEnabled}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['toggleAttitude',['$event']]]]]}}" bindchange="__e"></switch></view><view class="setting-item"><text>夜间模式</text><switch checked="{{darkMode}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['toggleNightMode',['$event']]]]]}}" bindchange="__e"></switch></view></view><view class="break-settings"><text class="section-title">休息设置</text><view class="setting-item"><text>自动休息</text><switch checked="{{autoBreak}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['toggleAutoBreak',['$event']]]]]}}" bindchange="__e"></switch></view><view class="break-time"><text>休息时长</text><text>{{breakOptions[selectedBreakIndex].value+"分钟"}}</text></view><view class="time-options"><block wx:for="{{breakOptions}}" wx:for-item="item" wx:for-index="index" wx:key="index"><button data-event-opts="{{[['tap',[['selectBreakTime',[index]]]]]}}" class="{{['time-btn '+(index===selectedBreakIndex?'active':'')]}}" bindtap="__e">{{''+item.label+''}}</button></block></view></view><view class="time-settings"><text class="section-title">专注时长</text><view class="time-options"><block wx:for="{{timeOptions}}" wx:for-item="item" wx:for-index="index" wx:key="index"><button data-event-opts="{{[['tap',[['selectFocusTime',[index]]]]]}}" class="{{['time-btn '+(index===selectedTimeIndex?'active':'')]}}" bindtap="__e">{{''+item.label+''}}</button></block></view><block wx:if="{{isCustomTime}}"><view class="custom-time"><view class="custom-time-header"><text>自定义时间（分钟）</text><text class="custom-time-value">{{customMinutes+"分钟"}}</text></view><slider min="1" max="120" step="1" value="{{customMinutes}}" activeColor="{{currTheme.colors.primary}}" backgroundColor="rgba(0, 0, 0, 0.1)" block-size="28" block-color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['customTimeChange',['$event']]]]]}}" bindchange="__e"></slider></view></block></view><block wx:if="{{$root.g0>0}}"><view class="prop-settings"><text class="section-title">使用道具</text><block wx:for="{{myPropList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="setting-item"><view style="display:flex;align-items:center;"><image style="width:38px;height:38px;margin-right:15rpx;" src="{{imgUrl+item.image}}"></image><view class="setting-info"><text>{{item.title+" x"+item.number}}</text><text class="setting-desc">{{item.desc}}</text></view></view><switch checked="{{item.checked}}" color="{{currTheme.colors.primary}}" data-event-opts="{{[['change',[['propChecked',['$event','$0'],[[['myPropList','',index]]]]]]]}}" bindchange="__e"></switch></view></block></view></block><button data-event-opts="{{[['tap',[['toggleFocus',['$event']]]]]}}" class="action-btn start" bindtap="__e">开始专注</button></view></theme-background></view>